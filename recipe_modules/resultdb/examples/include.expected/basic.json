[
  {
    "cmd": [
      "rdb",
      "query",
      "-json",
      "-n",
      "1000",
      "-u",
      "deadbeef"
    ],
    "infra_step": true,
    "luci_context": {
      "resultdb": {
        "current_invocation": {
          "name": "invocations/inv"
        },
        "hostname": "rdbhost"
      }
    },
    "name": "rdb query",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@raw_io.output@{\"invocation\": {\"state\": \"FINALIZED\"}, \"invocationId\": \"invid2\"}@@@",
      "@@@STEP_LOG_LINE@raw_io.output@{\"invocation\": {\"state\": \"FINALIZED\"}, \"invocationId\": \"invid\"}@@@",
      "@@@STEP_LOG_END@raw_io.output@@@"
    ]
  },
  {
    "cmd": [
      "rdb",
      "rpc",
      "luci.resultdb.v1.Recorder",
      "UpdateIncludedInvocations",
      "-include-update-token"
    ],
    "infra_step": true,
    "luci_context": {
      "resultdb": {
        "current_invocation": {
          "name": "invocations/inv"
        },
        "hostname": "rdbhost"
      }
    },
    "name": "rdb include",
    "stdin": "{\"addInvocations\": [\"invocations/invid2\", \"invocations/invid\"], \"includingInvocation\": \"invocations/inv\"}",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@json.output@{}@@@",
      "@@@STEP_LOG_END@json.output@@@",
      "@@@STEP_LOG_LINE@json.input@{@@@",
      "@@@STEP_LOG_LINE@json.input@  \"addInvocations\": [@@@",
      "@@@STEP_LOG_LINE@json.input@    \"invocations/invid2\", @@@",
      "@@@STEP_LOG_LINE@json.input@    \"invocations/invid\"@@@",
      "@@@STEP_LOG_LINE@json.input@  ], @@@",
      "@@@STEP_LOG_LINE@json.input@  \"includingInvocation\": \"invocations/inv\"@@@",
      "@@@STEP_LOG_LINE@json.input@}@@@",
      "@@@STEP_LOG_END@json.input@@@"
    ]
  },
  {
    "cmd": [
      "rdb",
      "rpc",
      "luci.resultdb.v1.Recorder",
      "UpdateIncludedInvocations",
      "-include-update-token"
    ],
    "infra_step": true,
    "luci_context": {
      "resultdb": {
        "current_invocation": {
          "name": "invocations/inv"
        },
        "hostname": "rdbhost"
      }
    },
    "name": "rdb exclude",
    "stdin": "{\"includingInvocation\": \"invocations/inv\", \"removeInvocations\": [\"invocations/invid2\", \"invocations/invid\"]}",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@json.output@{}@@@",
      "@@@STEP_LOG_END@json.output@@@",
      "@@@STEP_LOG_LINE@json.input@{@@@",
      "@@@STEP_LOG_LINE@json.input@  \"includingInvocation\": \"invocations/inv\", @@@",
      "@@@STEP_LOG_LINE@json.input@  \"removeInvocations\": [@@@",
      "@@@STEP_LOG_LINE@json.input@    \"invocations/invid2\", @@@",
      "@@@STEP_LOG_LINE@json.input@    \"invocations/invid\"@@@",
      "@@@STEP_LOG_LINE@json.input@  ]@@@",
      "@@@STEP_LOG_LINE@json.input@}@@@",
      "@@@STEP_LOG_END@json.input@@@"
    ]
  },
  {
    "name": "$result"
  }
]